<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.SbillitFriendMapper">
	<resultMap id="friend" type="SbillitFriend">
      <result property="userId" column="user_id"/>
      <result property="friendId" column="friend_id"/>
      <result property="status" column="status"/>
      <result property="createdAt" column="created_at"/>
      <result property="updatedAt" column="updated_at"/>
	</resultMap>
	
	<select id="findFriends" parameterType="java.util.HashMap" resultMap="friend">
	  SELECT * FROM sbillit_friend 
	  WHERE user_id = #{userId}
	  <if test="friendId != null">
	    AND friend_id = #{friendId}
	  </if>
	</select>	
	
	<insert id="insertFriends" parameterType="java.util.HashMap" >
	  INSERT INTO sbillit_friend (user_id, friend_id, status, created_at, updated_at)
	  VALUES 
	  <foreach item="item" collection="friendsList" separator=",">
          (#{item.userId}, #{item.friendId}, #{item.status}, UNIX_TIMESTAMP(), UNIX_TIMESTAMP())   
      </foreach>
	</insert>
	

</mapper>